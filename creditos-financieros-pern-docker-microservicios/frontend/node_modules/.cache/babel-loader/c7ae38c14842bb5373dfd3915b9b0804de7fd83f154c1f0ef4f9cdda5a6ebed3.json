{"ast":null,"code":"var _jsxFileName = \"/home/numpi/Documentos/Semestre 6/Anal/GRUPOPOGWARE-2025-PROYINF/creditos-financieros-pern-docker-microservicios/frontend/src/features/auth/authContext.js\",\n  _s = $RefreshSig$();\n// src/features/auth/authContext.js\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [hydrating, setHydrating] = useState(true);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      const decoded = safeDecode(token);\n      setUser({\n        token,\n        role: decoded === null || decoded === void 0 ? void 0 : decoded.role,\n        username: decoded === null || decoded === void 0 ? void 0 : decoded.username,\n        id: decoded === null || decoded === void 0 ? void 0 : decoded.id\n      });\n    }\n    setHydrating(false);\n  }, []);\n  const login = token => {\n    localStorage.setItem(\"token\", token);\n    const decoded = safeDecode(token);\n    setUser({\n      token,\n      role: decoded === null || decoded === void 0 ? void 0 : decoded.role,\n      username: decoded === null || decoded === void 0 ? void 0 : decoded.username,\n      id: decoded === null || decoded === void 0 ? void 0 : decoded.id\n    });\n  };\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    setUser(null);\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      login,\n      logout,\n      hydrating\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"wU30mw0C5MVuzOedYCSSR7aFiSg=\");\n_c = AuthProvider;\nfunction safeDecode(token) {\n  try {\n    const parts = token.split('.');\n    if (parts.length < 2) return null;\n    let payload = parts[1];\n    // base64url -> base64\n    payload = payload.replace(/-/g, '+').replace(/_/g, '/');\n    // pad\n    while (payload.length % 4 !== 0) payload += '=';\n    const json = atob(payload);\n    return JSON.parse(json);\n  } catch {\n    return null;\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","hydrating","setHydrating","token","localStorage","getItem","decoded","safeDecode","role","username","id","login","setItem","logout","removeItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","parts","split","length","payload","replace","json","atob","JSON","parse","$RefreshReg$"],"sources":["/home/numpi/Documentos/Semestre 6/Anal/GRUPOPOGWARE-2025-PROYINF/creditos-financieros-pern-docker-microservicios/frontend/src/features/auth/authContext.js"],"sourcesContent":["// src/features/auth/authContext.js\nimport React, { createContext, useState, useEffect } from \"react\";\nexport const AuthContext = createContext();\nexport const AuthProvider = ({ children }) => {\n\n  const [user, setUser] = useState(null);\n  const [hydrating, setHydrating] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      const decoded = safeDecode(token);\n      setUser({ token, role: decoded?.role, username: decoded?.username, id: decoded?.id });\n    }\n    setHydrating(false);\n  }, []);\n\n  const login = (token) => {\n    localStorage.setItem(\"token\", token);\n    const decoded = safeDecode(token);\n    setUser({ token, role: decoded?.role, username: decoded?.username, id: decoded?.id });\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    setUser(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout, hydrating }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nfunction safeDecode(token){\n  try {\n    const parts = token.split('.');\n    if (parts.length < 2) return null;\n    let payload = parts[1];\n    // base64url -> base64\n    payload = payload.replace(/-/g, '+').replace(/_/g, '/');\n    // pad\n    while (payload.length % 4 !== 0) payload += '=';\n    const json = atob(payload);\n    return JSON.parse(json);\n  } catch { return null; }\n}\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAClE,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC;AAC1C,OAAO,MAAMM,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAE5C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACd,MAAMW,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,EAAE;MACT,MAAMG,OAAO,GAAGC,UAAU,CAACJ,KAAK,CAAC;MACjCH,OAAO,CAAC;QAAEG,KAAK;QAAEK,IAAI,EAAEF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,IAAI;QAAEC,QAAQ,EAAEH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,QAAQ;QAAEC,EAAE,EAAEJ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI;MAAG,CAAC,CAAC;IACvF;IACAR,YAAY,CAAC,KAAK,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMS,KAAK,GAAIR,KAAK,IAAK;IACvBC,YAAY,CAACQ,OAAO,CAAC,OAAO,EAAET,KAAK,CAAC;IACpC,MAAMG,OAAO,GAAGC,UAAU,CAACJ,KAAK,CAAC;IACjCH,OAAO,CAAC;MAAEG,KAAK;MAAEK,IAAI,EAAEF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,IAAI;MAAEC,QAAQ,EAAEH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,QAAQ;MAAEC,EAAE,EAAEJ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI;IAAG,CAAC,CAAC;EACvF,CAAC;EAED,MAAMG,MAAM,GAAGA,CAAA,KAAM;IACnBT,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC;IAChCd,OAAO,CAAC,IAAI,CAAC;EACf,CAAC;EAED,oBACEN,OAAA,CAACC,WAAW,CAACoB,QAAQ;IAACC,KAAK,EAAE;MAAEjB,IAAI;MAAEY,KAAK;MAAEE,MAAM;MAAEZ;IAAU,CAAE;IAAAJ,QAAA,EAC7DA;EAAQ;IAAAoB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACtB,EAAA,CA9BWF,YAAY;AAAAyB,EAAA,GAAZzB,YAAY;AAgCzB,SAASW,UAAUA,CAACJ,KAAK,EAAC;EACxB,IAAI;IACF,MAAMmB,KAAK,GAAGnB,KAAK,CAACoB,KAAK,CAAC,GAAG,CAAC;IAC9B,IAAID,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI;IACjC,IAAIC,OAAO,GAAGH,KAAK,CAAC,CAAC,CAAC;IACtB;IACAG,OAAO,GAAGA,OAAO,CAACC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;IACvD;IACA,OAAOD,OAAO,CAACD,MAAM,GAAG,CAAC,KAAK,CAAC,EAAEC,OAAO,IAAI,GAAG;IAC/C,MAAME,IAAI,GAAGC,IAAI,CAACH,OAAO,CAAC;IAC1B,OAAOI,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC;EACzB,CAAC,CAAC,MAAM;IAAE,OAAO,IAAI;EAAE;AACzB;AAAC,IAAAN,EAAA;AAAAU,YAAA,CAAAV,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}