{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport { obtenerConfiguracion } from \"../services/simulacionApi\";\nimport { DEFAULT_CONFIG } from \"../constants\";\n\n// Cache simple en memoria para evitar múltiples requests en la misma sesión\nlet cachedConfig = null;\nexport default function useSimulacionConfig() {\n  _s();\n  const [config, setConfig] = useState(cachedConfig || DEFAULT_CONFIG);\n  const [loading, setLoading] = useState(!cachedConfig);\n  const [error, setError] = useState(null);\n  const mounted = useRef(true);\n  useEffect(() => {\n    mounted.current = true;\n    if (cachedConfig) {\n      setLoading(false);\n      return;\n    }\n    (async () => {\n      try {\n        const resp = await obtenerConfiguracion();\n        const cfg = {\n          TASA_BASE_ANUAL: resp.data.tasaBaseAnual,\n          GASTOS_OPERACIONALES_PORCENTAJE: resp.data.gastosOperacionalesPorcentaje,\n          COMISION_APERTURA: resp.data.comisionApertura,\n          MONTO_MIN: resp.data.montoMinimo,\n          MONTO_MAX: resp.data.montoMaximo,\n          PLAZO_MIN: resp.data.plazoMinimo,\n          PLAZO_MAX: resp.data.plazoMaximo\n        };\n        cachedConfig = cfg;\n        if (mounted.current) setConfig(cfg);\n      } catch (e) {\n        setError(e);\n      } finally {\n        if (mounted.current) setLoading(false);\n      }\n    })();\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n  return {\n    CONFIG: config,\n    loading,\n    error\n  };\n}\n_s(useSimulacionConfig, \"IXFfC6VXBbJWkTaQ7Svfx2ZU7iE=\");","map":{"version":3,"names":["useEffect","useRef","useState","obtenerConfiguracion","DEFAULT_CONFIG","cachedConfig","useSimulacionConfig","_s","config","setConfig","loading","setLoading","error","setError","mounted","current","resp","cfg","TASA_BASE_ANUAL","data","tasaBaseAnual","GASTOS_OPERACIONALES_PORCENTAJE","gastosOperacionalesPorcentaje","COMISION_APERTURA","comisionApertura","MONTO_MIN","montoMinimo","MONTO_MAX","montoMaximo","PLAZO_MIN","plazoMinimo","PLAZO_MAX","plazoMaximo","e","CONFIG"],"sources":["/home/numpi/Documentos/Semestre 6/Anal/GRUPOPOGWARE-2025-PROYINF/creditos-financieros-pern-docker-microservicios/frontend/src/features/simulacion/hooks/useSimulacionConfig.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { obtenerConfiguracion } from \"../services/simulacionApi\";\nimport { DEFAULT_CONFIG } from \"../constants\";\n\n// Cache simple en memoria para evitar múltiples requests en la misma sesión\nlet cachedConfig = null;\n\nexport default function useSimulacionConfig() {\n  const [config, setConfig] = useState(cachedConfig || DEFAULT_CONFIG);\n  const [loading, setLoading] = useState(!cachedConfig);\n  const [error, setError] = useState(null);\n  const mounted = useRef(true);\n\n  useEffect(() => {\n    mounted.current = true;\n    if (cachedConfig) {\n      setLoading(false);\n      return;\n    }\n\n    (async () => {\n      try {\n        const resp = await obtenerConfiguracion();\n        const cfg = {\n          TASA_BASE_ANUAL: resp.data.tasaBaseAnual,\n          GASTOS_OPERACIONALES_PORCENTAJE: resp.data.gastosOperacionalesPorcentaje,\n          COMISION_APERTURA: resp.data.comisionApertura,\n          MONTO_MIN: resp.data.montoMinimo,\n          MONTO_MAX: resp.data.montoMaximo,\n          PLAZO_MIN: resp.data.plazoMinimo,\n          PLAZO_MAX: resp.data.plazoMaximo,\n        };\n        cachedConfig = cfg;\n        if (mounted.current) setConfig(cfg);\n      } catch (e) {\n        setError(e);\n      } finally {\n        if (mounted.current) setLoading(false);\n      }\n    })();\n\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n\n  return { CONFIG: config, loading, error };\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,oBAAoB,QAAQ,2BAA2B;AAChE,SAASC,cAAc,QAAQ,cAAc;;AAE7C;AACA,IAAIC,YAAY,GAAG,IAAI;AAEvB,eAAe,SAASC,mBAAmBA,CAAA,EAAG;EAAAC,EAAA;EAC5C,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGP,QAAQ,CAACG,YAAY,IAAID,cAAc,CAAC;EACpE,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,CAACG,YAAY,CAAC;EACrD,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAMY,OAAO,GAAGb,MAAM,CAAC,IAAI,CAAC;EAE5BD,SAAS,CAAC,MAAM;IACdc,OAAO,CAACC,OAAO,GAAG,IAAI;IACtB,IAAIV,YAAY,EAAE;MAChBM,UAAU,CAAC,KAAK,CAAC;MACjB;IACF;IAEA,CAAC,YAAY;MACX,IAAI;QACF,MAAMK,IAAI,GAAG,MAAMb,oBAAoB,CAAC,CAAC;QACzC,MAAMc,GAAG,GAAG;UACVC,eAAe,EAAEF,IAAI,CAACG,IAAI,CAACC,aAAa;UACxCC,+BAA+B,EAAEL,IAAI,CAACG,IAAI,CAACG,6BAA6B;UACxEC,iBAAiB,EAAEP,IAAI,CAACG,IAAI,CAACK,gBAAgB;UAC7CC,SAAS,EAAET,IAAI,CAACG,IAAI,CAACO,WAAW;UAChCC,SAAS,EAAEX,IAAI,CAACG,IAAI,CAACS,WAAW;UAChCC,SAAS,EAAEb,IAAI,CAACG,IAAI,CAACW,WAAW;UAChCC,SAAS,EAAEf,IAAI,CAACG,IAAI,CAACa;QACvB,CAAC;QACD3B,YAAY,GAAGY,GAAG;QAClB,IAAIH,OAAO,CAACC,OAAO,EAAEN,SAAS,CAACQ,GAAG,CAAC;MACrC,CAAC,CAAC,OAAOgB,CAAC,EAAE;QACVpB,QAAQ,CAACoB,CAAC,CAAC;MACb,CAAC,SAAS;QACR,IAAInB,OAAO,CAACC,OAAO,EAAEJ,UAAU,CAAC,KAAK,CAAC;MACxC;IACF,CAAC,EAAE,CAAC;IAEJ,OAAO,MAAM;MACXG,OAAO,CAACC,OAAO,GAAG,KAAK;IACzB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEmB,MAAM,EAAE1B,MAAM;IAAEE,OAAO;IAAEE;EAAM,CAAC;AAC3C;AAACL,EAAA,CAxCuBD,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}