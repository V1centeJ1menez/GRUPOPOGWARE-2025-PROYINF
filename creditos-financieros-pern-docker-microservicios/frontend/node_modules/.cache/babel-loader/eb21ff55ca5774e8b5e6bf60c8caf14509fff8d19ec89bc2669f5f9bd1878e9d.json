{"ast":null,"code":"// utilidades para la simulación: formatos y generación de tabla de amortización\nexport const formatCurrency = value => {\n  const n = Number(value);\n  if (!Number.isFinite(n)) return \"—\";\n  return new Intl.NumberFormat(\"es-CL\", {\n    style: \"currency\",\n    currency: \"CLP\",\n    minimumFractionDigits: 0\n  }).format(Math.round(n));\n};\nexport const formatPercent = value => {\n  const n = Number(value);\n  if (!Number.isFinite(n)) return \"—\";\n  return `${(n * 100).toFixed(2)}%`;\n};\nexport const formatDate = dateString => {\n  return new Date(dateString).toLocaleDateString(\"es-CL\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\"\n  });\n};\nexport const generarTablaAmortizacion = sim => {\n  if (!sim) return [];\n  const tabla = [];\n  let saldo = Number(sim.monto);\n  const i = Number(sim.tasaBase) / 12;\n  const cuota = Math.round(Number(sim.cuotaMensual));\n  for (let mes = 1; mes <= Number(sim.plazo); mes++) {\n    let interes = Math.round(saldo * i);\n    let capital = cuota - interes;\n    if (mes === Number(sim.plazo)) {\n      capital = saldo;\n      interes = Math.max(0, cuota - capital);\n    }\n    saldo = Math.max(0, Math.round(saldo - capital));\n    tabla.push({\n      mes,\n      cuota,\n      interes,\n      capital,\n      saldo\n    });\n  }\n  return tabla;\n};","map":{"version":3,"names":["formatCurrency","value","n","Number","isFinite","Intl","NumberFormat","style","currency","minimumFractionDigits","format","Math","round","formatPercent","toFixed","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","generarTablaAmortizacion","sim","tabla","saldo","monto","i","tasaBase","cuota","cuotaMensual","mes","plazo","interes","capital","max","push"],"sources":["/home/numpi/Documentos/Semestre 6/Anal/GRUPOPOGWARE-2025-PROYINF/creditos-financieros-pern-docker-microservicios/frontend/src/features/simulacion/utils/simulacionUtils.js"],"sourcesContent":["// utilidades para la simulación: formatos y generación de tabla de amortización\nexport const formatCurrency = (value) => {\n  const n = Number(value);\n  if (!Number.isFinite(n)) return \"—\";\n  return new Intl.NumberFormat(\"es-CL\", {\n    style: \"currency\",\n    currency: \"CLP\",\n    minimumFractionDigits: 0,\n  }).format(Math.round(n));\n};\n\nexport const formatPercent = (value) => {\n  const n = Number(value);\n  if (!Number.isFinite(n)) return \"—\";\n  return `${(n * 100).toFixed(2)}%`;\n};\n\nexport const formatDate = (dateString) => {\n  return new Date(dateString).toLocaleDateString(\"es-CL\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n};\n\nexport const generarTablaAmortizacion = (sim) => {\n  if (!sim) return [];\n  const tabla = [];\n  let saldo = Number(sim.monto);\n  const i = Number(sim.tasaBase) / 12;\n  const cuota = Math.round(Number(sim.cuotaMensual));\n\n  for (let mes = 1; mes <= Number(sim.plazo); mes++) {\n    let interes = Math.round(saldo * i);\n    let capital = cuota - interes;\n    if (mes === Number(sim.plazo)) {\n      capital = saldo;\n      interes = Math.max(0, cuota - capital);\n    }\n    saldo = Math.max(0, Math.round(saldo - capital));\n\n    tabla.push({ mes, cuota, interes, capital, saldo });\n  }\n\n  return tabla;\n};\n"],"mappings":"AAAA;AACA,OAAO,MAAMA,cAAc,GAAIC,KAAK,IAAK;EACvC,MAAMC,CAAC,GAAGC,MAAM,CAACF,KAAK,CAAC;EACvB,IAAI,CAACE,MAAM,CAACC,QAAQ,CAACF,CAAC,CAAC,EAAE,OAAO,GAAG;EACnC,OAAO,IAAIG,IAAI,CAACC,YAAY,CAAC,OAAO,EAAE;IACpCC,KAAK,EAAE,UAAU;IACjBC,QAAQ,EAAE,KAAK;IACfC,qBAAqB,EAAE;EACzB,CAAC,CAAC,CAACC,MAAM,CAACC,IAAI,CAACC,KAAK,CAACV,CAAC,CAAC,CAAC;AAC1B,CAAC;AAED,OAAO,MAAMW,aAAa,GAAIZ,KAAK,IAAK;EACtC,MAAMC,CAAC,GAAGC,MAAM,CAACF,KAAK,CAAC;EACvB,IAAI,CAACE,MAAM,CAACC,QAAQ,CAACF,CAAC,CAAC,EAAE,OAAO,GAAG;EACnC,OAAO,GAAG,CAACA,CAAC,GAAG,GAAG,EAAEY,OAAO,CAAC,CAAC,CAAC,GAAG;AACnC,CAAC;AAED,OAAO,MAAMC,UAAU,GAAIC,UAAU,IAAK;EACxC,OAAO,IAAIC,IAAI,CAACD,UAAU,CAAC,CAACE,kBAAkB,CAAC,OAAO,EAAE;IACtDC,IAAI,EAAE,SAAS;IACfC,KAAK,EAAE,MAAM;IACbC,GAAG,EAAE,SAAS;IACdC,IAAI,EAAE,SAAS;IACfC,MAAM,EAAE;EACV,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMC,wBAAwB,GAAIC,GAAG,IAAK;EAC/C,IAAI,CAACA,GAAG,EAAE,OAAO,EAAE;EACnB,MAAMC,KAAK,GAAG,EAAE;EAChB,IAAIC,KAAK,GAAGxB,MAAM,CAACsB,GAAG,CAACG,KAAK,CAAC;EAC7B,MAAMC,CAAC,GAAG1B,MAAM,CAACsB,GAAG,CAACK,QAAQ,CAAC,GAAG,EAAE;EACnC,MAAMC,KAAK,GAAGpB,IAAI,CAACC,KAAK,CAACT,MAAM,CAACsB,GAAG,CAACO,YAAY,CAAC,CAAC;EAElD,KAAK,IAAIC,GAAG,GAAG,CAAC,EAAEA,GAAG,IAAI9B,MAAM,CAACsB,GAAG,CAACS,KAAK,CAAC,EAAED,GAAG,EAAE,EAAE;IACjD,IAAIE,OAAO,GAAGxB,IAAI,CAACC,KAAK,CAACe,KAAK,GAAGE,CAAC,CAAC;IACnC,IAAIO,OAAO,GAAGL,KAAK,GAAGI,OAAO;IAC7B,IAAIF,GAAG,KAAK9B,MAAM,CAACsB,GAAG,CAACS,KAAK,CAAC,EAAE;MAC7BE,OAAO,GAAGT,KAAK;MACfQ,OAAO,GAAGxB,IAAI,CAAC0B,GAAG,CAAC,CAAC,EAAEN,KAAK,GAAGK,OAAO,CAAC;IACxC;IACAT,KAAK,GAAGhB,IAAI,CAAC0B,GAAG,CAAC,CAAC,EAAE1B,IAAI,CAACC,KAAK,CAACe,KAAK,GAAGS,OAAO,CAAC,CAAC;IAEhDV,KAAK,CAACY,IAAI,CAAC;MAAEL,GAAG;MAAEF,KAAK;MAAEI,OAAO;MAAEC,OAAO;MAAET;IAAM,CAAC,CAAC;EACrD;EAEA,OAAOD,KAAK;AACd,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}